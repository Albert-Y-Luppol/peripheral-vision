{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"./lib/svg/play/play.component\";\nimport * as i3 from \"./lib/svg/stop/stop.component\";\nimport * as i4 from \"./lib/svg/zoom-in/zoom-in.component\";\nimport * as i5 from \"./lib/svg/zoom-out/zoom-out.component\";\nimport * as i6 from \"./lib/pipes/timePipe\";\nconst _c0 = [\"squares\"];\n\nfunction AppComponent_play_svg_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"play-svg\", 11);\n    i0.ɵɵlistener(\"click\", function AppComponent_play_svg_1_Template_play_svg_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.handlePlay();\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_stop_svg_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"stop-svg\", 12);\n    i0.ɵɵlistener(\"click\", function AppComponent_stop_svg_2_Template_stop_svg_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.handleStop();\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"div\", 14);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_3_Template_div_click_1_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.handleControl(\"columnsAmount\", \"decrease\");\n    });\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3, \"-\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 14);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_3_Template_div_click_4_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.handleControl(\"columnsAmount\", \"increase\");\n    });\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6, \"+\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction AppComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"div\", 14);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_4_Template_div_click_1_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.handleControl(\"rowsAmount\", \"increase\");\n    });\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3, \"+\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 14);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_4_Template_div_click_4_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return ctx_r19.handleControl(\"rowsAmount\", \"decrease\");\n    });\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6, \"-\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction AppComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"div\", 14);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_5_Template_div_click_1_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.handleControl(\"squareSide\", \"increase\", 5);\n    });\n    i0.ɵɵelement(2, \"zoom-in-svg\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 14);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_5_Template_div_click_3_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return ctx_r22.handleControl(\"squareSide\", \"decrease\", 5);\n    });\n    i0.ɵɵelement(4, \"zoom-out-svg\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AppComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"msToTime\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Your time: \", i0.ɵɵpipeBind1(2, 1, ctx_r5.time), \" \");\n  }\n}\n\nconst _c1 = function (a1) {\n  return {\n    \"square\": true,\n    \"square--selected\": a1\n  };\n};\n\nconst _c2 = function (a0, a1, a2) {\n  return {\n    \"height\": a0,\n    \"width\": a1,\n    \"font-size\": a2\n  };\n};\n\nfunction AppComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_9_Template_div_click_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r25);\n      const num_r23 = restoredCtx.$implicit;\n      const ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.handleSquareSelection(num_r23, $event.target);\n    });\n    i0.ɵɵelementStart(1, \"div\", 19);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const num_r23 = ctx.$implicit;\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(3, _c1, num_r23 < ctx_r7.currentNumber))(\"ngStyle\", i0.ɵɵpureFunction3(5, _c2, ctx_r7.squareSide + \"px\", ctx_r7.squareSide + \"px\", ctx_r7.squareSide * 0.5 + \"px\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(num_r23);\n  }\n}\n\nfunction AppComponent_ng_template_10_Template(rf, ctx) {}\n\nconst _c3 = function (a0) {\n  return {\n    \"grid-template-columns\": a0\n  };\n};\n\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor() {\n      this.TrainerStates = TrainerStates;\n      this.rowsAmount = 5;\n      this.columnsAmount = 5;\n      this.squareSide = 100;\n      this.state = TrainerStates.setup;\n      this.numbers = new Array(this.rowsAmount * this.columnsAmount);\n      this.currentNumber = 0;\n      this.time = 0;\n    }\n\n    getScreenSize() {\n      this._scrHeight = window.innerHeight;\n      this._scrWidth = window.innerWidth;\n    }\n\n    ngAfterViewInit() {\n      this.getScreenSize();\n    }\n\n    handlePlay() {\n      this.numbers = this._generateShuffledNumbers(this.rowsAmount * this.columnsAmount);\n      this.state = TrainerStates.play;\n      this.currentNumber = 1;\n      {\n        const els = this.squaresElement.nativeElement.getElementsByClassName('square--answered');\n        Array.from(els).forEach(el => el.classList.remove('square--answered'));\n      }\n      this.time = Date.now();\n    }\n\n    handleStop() {\n      this._gameOver();\n\n      this.time = 0;\n    }\n\n    handleSquareSelection(selectedNumber, square) {\n      if (!selectedNumber || !square) return;\n      if (this.currentNumber !== selectedNumber) return this.handleWrongSelection(square);\n      this.handleRightSelection(square);\n      this.currentNumber++;\n      if (this.currentNumber > this.rowsAmount * this.columnsAmount) this._gameOver();\n    }\n\n    handleRightSelection(square) {\n      square.classList.add('square--right');\n      setTimeout((square => {\n        square.classList.add('square--answered');\n        square.classList.remove('square--right');\n      }).bind(null, square), 300);\n    }\n\n    handleWrongSelection(square) {\n      square.classList.add('square--wrong');\n      setTimeout((square => {\n        square.classList.remove('square--wrong');\n      }).bind(null, square), 300);\n    }\n\n    _generateShuffledNumbers(maxNumber) {\n      const result = new Array();\n\n      while (result.length < maxNumber) {\n        const num = this._getRandomNumberInBoundaries(1, maxNumber);\n\n        if (result.includes(num)) continue;\n        result.push(num);\n      }\n\n      return result;\n    }\n\n    handleControl(entityName, action, amount = 1) {\n      switch (action) {\n        case 'increase':\n          {\n            // validation\n            const {\n              width,\n              height\n            } = this.squaresElement.nativeElement.getBoundingClientRect();\n            const maxWidth = this._scrWidth - 150;\n            const maxHeight = this._scrHeight - 150;\n\n            switch (entityName) {\n              case 'rowsAmount':\n                if (height + this.squareSide * amount > maxHeight) return;\n                break;\n\n              case 'columnsAmount':\n                if (width + this.squareSide * amount > maxWidth) return;\n                break;\n\n              case 'squareSide':\n                if (width + this.columnsAmount * amount > maxWidth || height + this.rowsAmount * amount > maxHeight) return;\n                break;\n\n              default:\n                return;\n            }\n          }\n          this[entityName] += amount;\n          break;\n\n        case 'decrease':\n          if (this[entityName] <= amount) return;\n          this[entityName] -= amount;\n          break;\n\n        default:\n          break;\n      }\n\n      if (entityName === 'rowsAmount' || entityName === 'columnsAmount') {\n        this.numbers = new Array(this.rowsAmount * this.columnsAmount);\n      }\n    }\n    /**\n     * Get's random N value between two provided boundaries\n     *\n     * @param leftBound // 0 < leftBound < rightBound >> in N\n     * @param rightBound // leftBound < rightBound < any >> in N\n     */\n\n\n    _getRandomNumberInBoundaries(leftBound, rightBound) {\n      if (leftBound >= rightBound) throw new Error('Can not generate numbers');\n      const coefficient = Math.random();\n      const rangeLength = rightBound - leftBound;\n      const numberPosition = Math.round(coefficient * rangeLength);\n      return numberPosition + leftBound;\n    }\n\n    _gameOver() {\n      this.time = Date.now() - this.time;\n      this.state = TrainerStates.setup;\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)();\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    viewQuery: function AppComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.squaresElement = _t.first);\n      }\n    },\n    hostBindings: function AppComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"resize\", function AppComponent_resize_HostBindingHandler($event) {\n          return ctx.getScreenSize($event);\n        }, false, i0.ɵɵresolveWindow);\n      }\n    },\n    decls: 12,\n    vars: 10,\n    consts: [[1, \"background\"], [\"class\", \"btn btn--play\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn--stop\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"controls controls--horizontal controls--center-top\", 4, \"ngIf\"], [\"class\", \"controls controls--vertical controls--left-center\", 4, \"ngIf\"], [\"class\", \"controls controls--scale  controls--vertical controls--right-bottom\", 4, \"ngIf\"], [\"class\", \"time\", 4, \"ngIf\"], [1, \"squares\", 3, \"ngStyle\"], [\"squares\", \"\"], [3, \"ngClass\", \"ngStyle\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"square\", \"\"], [1, \"btn\", \"btn--play\", 3, \"click\"], [1, \"btn\", \"btn--stop\", 3, \"click\"], [1, \"controls\", \"controls--horizontal\", \"controls--center-top\"], [1, \"btn\", \"btn--control\", 3, \"click\"], [1, \"controls\", \"controls--vertical\", \"controls--left-center\"], [1, \"controls\", \"controls--scale\", \"controls--vertical\", \"controls--right-bottom\"], [1, \"time\"], [3, \"ngClass\", \"ngStyle\", \"click\"], [1, \"square__num\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, AppComponent_play_svg_1_Template, 1, 0, \"play-svg\", 1);\n        i0.ɵɵtemplate(2, AppComponent_stop_svg_2_Template, 1, 0, \"stop-svg\", 2);\n        i0.ɵɵtemplate(3, AppComponent_div_3_Template, 7, 0, \"div\", 3);\n        i0.ɵɵtemplate(4, AppComponent_div_4_Template, 7, 0, \"div\", 4);\n        i0.ɵɵtemplate(5, AppComponent_div_5_Template, 5, 0, \"div\", 5);\n        i0.ɵɵtemplate(6, AppComponent_div_6_Template, 3, 3, \"div\", 6);\n        i0.ɵɵelementStart(7, \"div\", 7, 8);\n        i0.ɵɵtemplate(9, AppComponent_div_9_Template, 3, 9, \"div\", 9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(10, AppComponent_ng_template_10_Template, 0, 0, \"ng-template\", null, 10, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.state === ctx.TrainerStates.setup);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.state === ctx.TrainerStates.play);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.state === ctx.TrainerStates.setup);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.state === ctx.TrainerStates.setup);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.state === ctx.TrainerStates.setup);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.time && ctx.state === ctx.TrainerStates.setup);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(8, _c3, \"repeat(\" + ctx.columnsAmount + \", 1fr)\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.numbers);\n      }\n    },\n    directives: [i1.NgIf, i2.PlayComponent, i3.StopComponent, i4.ZoomInComponent, i5.ZoomOutComponent, i1.NgStyle, i1.NgForOf, i1.NgClass],\n    pipes: [i6.MsToTimePipe],\n    styles: [\".background[_ngcontent-%COMP%]{position:relative;width:100vw;height:100vh}.squares[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:grid;border:.5px solid black}.square[_ngcontent-%COMP%]{border:.5px solid black;transition:all .3s ease-out;cursor:pointer;position:relative}.square--right[_ngcontent-%COMP%]{background-color:#00ff3c8b}.square--wrong[_ngcontent-%COMP%]{background-color:#ff00008b}.square--answered[_ngcontent-%COMP%]{color:#005915}.square__num[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:-1}.btn[_ngcontent-%COMP%]{cursor:pointer;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none}.btn--play[_ngcontent-%COMP%]{position:absolute;left:10px;top:10px;width:60px;height:50px}.btn--play[_ngcontent-%COMP%]:hover, .btn--play[_ngcontent-%COMP%]:focus   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#08ff94}.btn--play[_ngcontent-%COMP%]:active   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#00a806}.btn--stop[_ngcontent-%COMP%]{position:absolute;left:10px;top:10px;width:60px;height:50px}.btn--stop[_ngcontent-%COMP%]:hover, .btn--stop[_ngcontent-%COMP%]:focus   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#ff0808}.btn--stop[_ngcontent-%COMP%]:active   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#a80000}.btn--control[_ngcontent-%COMP%]{font-size:30px;line-height:.9;border:1px solid lightgrey;margin:5px;padding:5px;width:30px;height:30px;text-align:center;vertical-align:center;display:flex;align-content:center;justify-content:center;border-radius:10%}.btn--control[_ngcontent-%COMP%]:active, .btn--control[_ngcontent-%COMP%]:focus, .btn--control[_ngcontent-%COMP%]:hover{background:lightgrey}.time[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:green;font-size:20px}.controls[_ngcontent-%COMP%]{display:flex}.controls--vertical[_ngcontent-%COMP%]{flex-direction:column}.controls--horizontal[_ngcontent-%COMP%]{flex-direction:row}.controls--left-center[_ngcontent-%COMP%]{position:absolute;left:10px;top:50%;transform:translateY(-50%)}.controls--center-top[_ngcontent-%COMP%]{position:absolute;top:10px;left:50%;transform:translate(-50%)}.controls--right-bottom[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px}\"]\n  });\n  return AppComponent;\n})();\nvar TrainerStates = /*#__PURE__*/(() => {\n  (function (TrainerStates) {\n    TrainerStates[\"setup\"] = \"setup\";\n    TrainerStates[\"play\"] = \"play\";\n  })(TrainerStates || (TrainerStates = {}));\n\n  return TrainerStates;\n})();","map":null,"metadata":{},"sourceType":"module"}